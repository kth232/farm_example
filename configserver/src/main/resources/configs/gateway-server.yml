server:
  port: 3000

spring:
  cloud:
    gateway:
      discovery.locator:
        enabled: true
        lowerCaseServiceId: true #초기 상태에는 대문자밖에 안되기 때문에 소문자로 작성하도록 설정

      routes: # 다른 주소로 연결 가능
        - id: api-service #리스트 형태
          uri: lb://api-service
          predicates:
            - Path=/api/v1/** #매핑한 해당 주소로도 접근 가능함
          filters:
            - RewritePath=/api/v1/?(?<path>.*),/$\{path}  #주소 다시 쓰기, 패턴 사용
              # ?: 와일드카드, ? 뒤에 대체할 경로 작성

        #어드민 서비스 개발 시 해당 필터 사용 예정
        - id: admin-service #리스트 형태
          uri: lb://admin-service
          predicates:
            - Path=/admin/** #매핑한 해당 주소로도 접근 가능함
          filters:
            - RewritePath=/admin/?(?<path>.*),/$\{path}  #주소 다시 쓰기, 패턴 사용
            # ?: 와일드카드, ? 뒤에 대체할 경로 작성


#eureka 설정
eureka:
  instance:
    #hostname: ${hostname}
    preferIpAddress: true

  client:
    registerWithEureka: true
    fetchRegistry: true
    serviceUrl:
      defaultZone: ${eurekaHost}/eureka/

#액츄에이터 설정
management:
  endpoint:
    gateway:
      enabled: true

  endpoints:
    web:
      exposure:
        include: gateway